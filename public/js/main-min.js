const start=document.getElementById("start"),reset=document.getElementById("reset"),step=document.getElementById("step"),second=document.getElementById("seconds"),minute=document.getElementById("minutes"),hour=document.getElementById("hours"),listSteps=document.getElementById("list_steps"),setOneButton=document.getElementById("one_button_set"),steps=[];let timeId,isRunning=!1,counter=0,counterPrev=0,startHidden=document.querySelector(".stops").getBoundingClientRect().top+50,endHidden=document.querySelector("body").getBoundingClientRect().bottom-50,sizeCounter="body";function Time(){this.hour=0,this.minute=0,this.second=0,this.setTime=function(e){this.hour=Math.floor(e/3600),this.minute=Math.floor((e-60*this.hour*60)/60),this.second=lessThenTen(e-60*this.hour*60-60*this.minute),this.minute=lessThenTen(this.minute),this.hour=lessThenTen(this.hour)},this.setClock=function(){second.textContent=this.second,minute.textContent=this.minute,hour.textContent=this.hour}}function lessThenTen(e){return e<10?"0"+e:e}function getTemp(e,t,n,s){return`<li data-index="${e}" class="list_elevent ${s?"opacity_li":""} ">\n              <span class="numbers">${e+1}) </span>\n              <span class="numbers">Full... </span>\n              <span class="numbers">${t}  </span>\n              <span class="numbers">Delta... </span>\n              <span class="numbers"> ${n} </span>\n            </li>`}function render(e){listSteps.innerHTML="";for(let t=e.length-1;t>=0;t--)listSteps.insertAdjacentHTML("beforeend",getTemp(t,e[t].full,e[t].delta,e[t].hidden));for(let t=0;t<e.length;t++)testMapping(t)}function testMapping(e){document.querySelector(`[data-index="${e}"]`).getBoundingClientRect().bottom<startHidden||document.querySelector(`[data-index="${e}"]`).getBoundingClientRect().bottom>endHidden?(document.querySelector(`[data-index="${e}"]`).classList.add("opacity_li"),steps[e].hidden=!0):(document.querySelector(`[data-index="${e}"]`).classList.remove("opacity_li"),steps[e].hidden=!1)}start.onclick=function(){if(isRunning)clearInterval(timeId),start.textContent="start",isRunning=!1;else{let e=new Time;reset.classList.remove("hidden_btn"),step.classList.remove("hidden_btn"),start.textContent="stop",timeId=setInterval(function(){++counter,e.setTime(counter),e.setClock()},1e3),isRunning=!0,setOneButton.classList.remove("one_button")}},step.onclick=function(){let e=new Time;e.setTime(counter);let t=new Time;t.setTime(counter-counterPrev),counterPrev=counter;const n={full:`${e.hour}:${e.minute}:${e.second}`,delta:`${t.hour}:${t.minute}:${t.second}`,hidden:!1};steps.push(n),render(steps),window.scroll(top)},reset.onclick=function(){clearInterval(timeId),counter=0,counterPrev=0,start.textContent="start",reset.classList.add("hidden_btn"),step.classList.add("hidden_btn");let e=new Time;e.setTime(counter),e.setClock(),steps.length=0,setOneButton.classList.add("one_button"),render(steps)},render(steps),window.addEventListener("scroll",e=>{for(let e=0;e<steps.length;e++)testMapping(e)}),window.addEventListener("resize",function(e){endHidden=device.desktop()?document.querySelector("body").getBoundingClientRect().bottom-50:window.screen.height-50,startHidden=document.querySelector(".buttons").getBoundingClientRect().bottom+100;for(let t=0;t<e.length;t++)testMapping(t)});